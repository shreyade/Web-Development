function $(e){return document.getElementById(e)}function $$(e){var n=document.querySelectorAll(e);return 1==n.length?n[0]:n}function hide(e){if(e instanceof Array)for(var n=0;n<e.length;n++)e[n].classList.add("hidden");else e.classList.add("hidden")}function show(e){if(e instanceof Array)for(var n=0;n<e.length;n++)e[n].classList.remove("hidden");else e.classList.remove("hidden")}function toggleDisplay(e){if(e instanceof Array)for(var n=0;n<e.length;n++)e[n].classList.toggle("hidden");else e.classList.toggle("hidden")}function gen(e,n){var t=document.createElement(e);if(n&&""!=n)if(n instanceof Array)for(var o=0;o<n.length;o++)t.classList.add(n[o]);else t.classList.add(n);return t}function genText(e,n){var t=document.createElement(e);return t.innerText=n,t}function appendChildren(e,n){for(var t=0;t<n.length;t++)e.appendChild(n[t]);return e}function escSpChar(e){for(var n=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","`","{","|","}","~"," "],t=0;t<e.length;t++)n.includes(e.charAt(t))&&(e=e.slice(0,t)+"\\"+e.slice(t),t+=1);return e}function getRequest(e,n,t){let o={};e.indexOf("webster.cs.washington.edu")<0&&(o.credentials="include"),fetch(e+n,o).then(checkStatus).then(t).catch(console.log)}function postRequest(e,n,t){let o={method:"POST",body:n};e.indexOf("webster.cs.washington.edu")<0&&(o.credentials="include"),fetch(e,o).then(checkStatus).then(t).catch(console.log)}function handleGetCreds(e){let n=e.split("\n");n.length<2?console.log("Error: getcreds.php does not output pid and token on separate lines."):(pid=n[0],token=n[1],console.log("getcreds.php call finished. pid: "+pid+", token: "+token))}function fetchPid(){pid&&token||(console.log("Calling getcreds.php..."),getRequest("getcreds.php","",handleGetCreds))}function restartMyDex(){let e=new FormData;e.append("mode","removeall"),console.log("Calling delete.php with mode=removeall..."),postRequest("delete.php",e,function(e){console.log("delete.php finished with mode=removeall"),console.log("The following pokedex should be empty:"),fetchMyPokemon()})}function getDex(e,n,t){let o=new FormData;o.append("pid",e),o.append("token",n),t&&o.append("force","true"),postRequest(SERVICE_URL+"restart.php",o,function(e){let n=JSON.parse(e);if(n.length>1){restartMyDex();for(i in n)addPokemon(n[i])}})}function removeFromPokedex(e){var n=new FormData;n.append("name",e),console.log("Calling delete.php with name="+e+"..."),postRequest("delete.php",n,function(n){$(e).classList.add("unfound"),$(e).onclick="",console.log("delete.php with name="+e+" returned:"),console.log(JSON.parse(n)),fetchMyPokemon()})}function fetchMyPokemon(){console.log("Calling select.php..."),getRequest("select.php","",function(e){myPokemon=JSON.parse(e),console.log("select.php returned: "),console.log(myPokemon)})}function addPokemon(e){var n=new FormData;n.append("name",e),console.log("Calling insert.php with name="+e+"..."),postRequest("insert.php",n,function(){console.log("insert.php finished."),fetchMyPokemon()})}function logStudentTestCall(e){console.log("Finished call to trade.php. Response: ");let n=JSON.parse(e);console.log(n)}function creds(){return"?pid="+pid+"&token="+token}function checkStatus(e){return e.status>=200&&e.status<300||0==e.status?e.text():Promise.reject(new Error(e.status+": "+e.statusText))}var token,pid,myPokemon,SERVICE_URL="https://webster.cs.washington.edu/pokedex-2/18sp/";!function(){"use strict";function e(){$("title").innerText="Game Menu",hide([$("game-view"),$("main-menu-btn")]),hide(this),show($("menu-view"));let e=document.querySelectorAll(".low-health");for(let n=0;n<e.length;n++)e[n].classList.remove("low-health");let n=$$(".buffs");for(let e=0;e<n.length;e++)n[e].innerHTML="";$("p1-turn-results").innerHTML="",$("p2-turn-results").innerHTML="",hide($("turn-status-p"))}function n(){$("your-pokedex-btn").onclick=function(){W(this.id,"your-pokedex-view"),l("my-dex-view",pid)},$$("#your-pokedex-view-card .name").ondblclick=t}function t(){if(V){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.empty();let e=U(V),n="Would you like to give "+V+" a nickname?";if(e&&(n='Would you like to rename your "'+e+'"?'),confirm(n)&&null!==(e=prompt("Nickname to give your "+V+" (Leave empty to remove nickname):",e?e:""))){let n="Calling update.php with name="+V,t=new FormData;t.append("name",V),""!=e?(t.append("nickname",e),n+=" and nickname="+e):n+=" and no nickname",console.log(n),postRequest("update.php",t,function(){let n=""!=e?e:V;alert("Success! You have renamed "+n+"!"),l("pokedex-view",pid),l("my-pokemon",pid),l("my-dex-view",pid);let t=V+(""!=e?" ("+e+")":"");$$("#your-pokedex-view-card .name").innerText=t})}}}function o(){s(),$("new-game-btn").onclick=function(){W(this.id,"new-game-view"),$("new-game-view").classList.contains("hidden")||$$("#new-game-view .part-0").classList.remove("hidden")},$("choose-pokemon-btn").onclick=function(){l("pokedex-view",pid),toggleDisplay($$("#new-game-view .part-iii")),this.classList.toggle("chosen-btn")},$("start-game").onclick=function(){""!=V&&(""==X&&(X="-bot-"),$("choose-pokemon-title").innerText="Choose a Pokemon:",show($$("#new-game-view .part-iii hr")),_(X))}}function i(){X&&"-bot-"!=X&&(hide($$("#new-game-view .part-iii hr")),$("choose-pokemon-title").innerText="Choose a Pokemon to play with "+X+":",l("pokedex-view",pid),show([$$("#new-game-view"),$$("#new-game-view .part-iii")]),hide($("invite-view")))}function s(){let e=$$(".opponent-btn");for(let n=0;n<e.length;n++)e[n].onclick=function(){hide([$$("#new-game-view .part-ii"),$$("#new-game-view .part-iii")]),this.classList.toggle("chosen-btn");let n=$$("#new-game-view button");for(let e=0;e<n.length;e++)n[e]!=this&&n[e].classList.remove("chosen-btn");for(let n=0;n<e.length;n++)if(e[n]!=this)if(this.classList.contains("chosen-btn"))e[n].classList.remove("chosen-btn"),"student"!=this.id&&hide($("choose-student")),show($$("#new-game-view .part-ii"));else{hide([$$("#new-game-view .part-ii")]),hide([$$("#new-game-view .part-iii")]);let t=$$("#new-game-view button");for(let e=0;e<t.length;e++)t[e].classList.remove("chosen-btn");show(e[n])}"student"==this.id?(toggleDisplay($("choose-student")),$("choose-student").classList.contains("hidden")||(X="medskm")):X=this.id}}function r(){$("trade-btn").onclick=function(){W(this.id,"trade-view"),hide($("current-proposals-view")),hide($("new-proposal-view"))},$("propose").onclick=function(){this.classList.toggle("chosen-btn"),this.classList.contains("chosen-btn")&&$("view-proposals").classList.remove("chosen-btn"),hide($("current-proposals-view")),toggleDisplay($("new-proposal-view")),$("new-proposal-view").classList.contains("hidden")&&(show($("show-p2-dex")),hide($("pokedices")))},$("propose-submit").onclick=L,$("view-proposals").onclick=function(){toggleDisplay($("current-proposals-view")),this.classList.toggle("chosen-btn"),hide($("new-proposal-view")),this.classList.contains("chosen-btn")&&($("propose").classList.remove("chosen-btn"),u())},$("show-p2-dex").onclick=function(){show([$$("#new-proposal-view .part-iv"),$("pokedices")]),this.classList.add("hidden"),l("my-pokemon",pid),l("their-pokemon",$("users").value)},$("users").onchange=function(){l("my-pokemon",pid),l("their-pokemon",$("users").value)}}function a(){$("invite-btn").onclick=function(){c()}}function d(){const e={37:"left",38:"up",39:"right",40:"down",65:"a",66:"b"},n=["up","up","down","down","left","right","left","right","b","a"];let t=0;document.addEventListener("keydown",function(o){e[o.keyCode]==n[t]?++t==n.length&&(p(),t=0):t=0})}function p(){alert("Welcome PonyTA."),function(e,n){var t=1,o=function(){0===--t&&(BrowserPonies.setBaseUrl(n.baseurl),BrowserPoniesBaseConfig.loaded||(BrowserPonies.loadConfig(BrowserPoniesBaseConfig),BrowserPoniesBaseConfig.loaded=!0),BrowserPonies.loadConfig(n),BrowserPonies.running()||BrowserPonies.start())};"undefined"==typeof BrowserPoniesConfig&&(window.BrowserPoniesConfig={}),"undefined"==typeof BrowserPoniesBaseConfig&&(++t,BrowserPoniesConfig.onbasecfg=o),"undefined"==typeof BrowserPonies&&(++t,BrowserPoniesConfig.oninit=o);var i=document.body||document.documentElement||document.getElementsByTagName("head")[0];for(var s in e)if(!document.getElementById(s))if(i){var r=document.createElement("script");r.type="text/javascript",r.id=s,r.src=e[s],i.appendChild(r)}else document.write('<script type="text/javscript" src="'+e[s]+'" id="'+s+'"></script>');o()}({"browser-ponies-script":"https://panzi.github.io/Browser-Ponies/browserponies.js","browser-ponies-config":"https://panzi.github.io/Browser-Ponies/basecfg.js"},{baseurl:"https://panzi.github.io/Browser-Ponies/",fadeDuration:500,volume:1,fps:25,speed:3,audioEnabled:!1,dontSpeak:!0,showFps:!1,showLoadProgress:!0,speakProbability:.1,spawn:{"rainbow dash":1}}),document.body.style.background="-webkit-linear-gradient(top, #2d96c6 0%,#c9e6f4 100%)",document.body.style.height="100vh",$("title").innerText="PonyTA MODE ACTIVE!"}function c(){getRequest(Q+"list-games.php",creds(),q)}function l(e,n){let t=n==pid;getRequest(Q+"users.php","?mode=pokemon&pid="+n,function(n){T(e,JSON.parse(n)),t&&fetchMyPokemon()})}function u(){getRequest(Q+"list-trades.php",creds(),f)}function h(e,n){getRequest(Q+"trade-info.php",creds()+"&trade_id="+e,function(e){y(JSON.parse(e),n)})}function m(){getRequest(Q+"list-users.php","",w)}function f(e){let n=JSON.parse(e);0===n.offers_from_me.length&&0===n.offers_to_me.length?($("trade-message").innerHTML="There are no trades currently offered to you.",hide([$("by-you"),$("to-you")]),show($("trade-message"))):g(n)}function g(e){let n=e.offers_to_me;n.length>0?$$("#to-you .results-table").innerHTML="<tr><th>Player</th><th>Their Offer</th><th>Their Request</th><th>Date</th></tr>":$$("#to-you .results-table").innerHTML="<p>You do not have any proposals to accept or decline.</p>";for(let e=0;e<n.length;e++){let t=n[e];h(t,"to-you")}let t=e.offers_from_me;t.length>0?$$("#by-you .results-table").innerHTML="<tr><th>Player</th><th>Your Offer</th><th>Your Request</th><th>Date</th></tr>":$$("#by-you .results-table").innerHTML="<p>You do not have any proposals waiting to be accepted or declined by other players.</p>";for(let e=0;e<t.length;e++){let n=t[e];h(n,"by-you")}hide($("trade-message")),show([$("by-you"),$("to-you"),$$("#by-you .results-table"),$$("#to-you .results-table")])}function w(e){let n=JSON.parse(e),t=$("users");for(let e=0;e<n.length;e++)if(n[e]!=pid){let o=document.createElement("option");o.value=n[e],o.innerText=n[e],t.appendChild(o);let i=document.createElement("option");i.value=n[e],i.innerText=n[e],$("opps").appendChild(i)}$("opps").value="whitab",$("users").value="whitab",$("opps").onchange=function(){X=this.value,show($("choose-pokemon-btn")),show($("start-game"))}}function y(e,n){let t=gen("tr");t.id=e.id;let o="to-you"===n?e.offerer:e.offeree,i=genText("td",o),s=gen("td"),r=genText("p",e.requested_pokemon),a=genText("p",e.offered_pokemon),d=$$("#pokedex-view .sprite[pokemon='"+e.requested_pokemon+"']").cloneNode();s.appendChild(r),r.appendChild(d);let p=gen("td"),c=$$("#pokedex-view .sprite[pokemon='"+e.offered_pokemon+"']").cloneNode();"to-you"===n?d.classList.remove("unfound"):c.classList.remove("unfound"),p.appendChild(a),a.appendChild(c);let l=genText("td",e.created),u=gen("td");if(appendChildren(t,[i,p,s,l]),"to-you"==n){let e=gen("button","small-btn");e.innerText="Accept",e.onclick=k;let n=gen("button","small-btn");n.innerText="Reject",n.onclick=x,appendChildren(u,[e,n])}else{let e=gen("button","small-btn");e.innerText="Cancel Request",u.appendChild(e),e.onclick=x}t.appendChild(u),$$("#"+n+" .results-table tbody").appendChild(t)}function k(){if(confirm("Are you sure you want to accept this trade?")){let e=this.parentNode.parentNode.id,n=new FormData;n.append("pid",pid),n.append("token",token),n.append("action","accept");let t=this.parentNode.parentNode.querySelectorAll("td")[2].innerText.trim(),o=this.parentNode.parentNode.querySelectorAll("td")[1].innerText.trim();n.append("pokemon",t),n.append("trade_id",e),postRequest(Q+"conclude-trade.php",n,function(){alert("Trade successful!"),v(t,o);let e="";confirm("You've collected "+o+" from a trade! Give it a nickname?")&&(e=prompt("Nickname to give your "+o+":")),e&&b(o,e),u()})}}function v(e,n){console.log("Calling student's trade.php with mypokemon="+e+" and theirpokemon="+n+"...");let t=new FormData;t.append("mypokemon",e),t.append("theirpokemon",n),postRequest("trade.php",t,logStudentTestCall)}function b(e,n){let t=new FormData;t.append("name",e),t.append("nickname",n),console.log("Calling student's update.php with name="+name+" and nickname="+n+"..."),postRequest("update.php",t,logStudentTestCall)}function x(){if(confirm("Are you sure you want to cancel this trade?")){let e=this.parentNode.parentNode.id,n=new FormData;n.append("pid",pid),n.append("token",token),n.append("pokemon",this.parentNode.parentNode.querySelectorAll("td")[2].innerText.trim()),n.append("tradeid",e),postRequest(Q+"cancel-trade.php",n,function(){alert("Trade successfully canceled"),u()})}}function L(){let e=$("offer").innerText,n=$("request").innerText;if(""!=e&&""!=n){let t=new FormData;t.append("pid",pid),t.append("pid2",$("users").value),t.append("token",token),t.append("pokemon",e),t.append("pokemon2",n),postRequest(Q+"offer-trade.php",t,function(){alert("Proposal successful!"),$("view-proposals").click()})}else alert("Please select a Pokemon to offer and request from the displayed Pokedex views.")}function T(e,n){let t=$(e);C(e);for(let o=0;o<n.length;o++){let i=t.querySelector("img[pokemon='"+escSpChar(n[o])+"']");i&&(i.classList.remove("unfound"),i.onclick="pokedex-view"==e?H:P)}}function C(e){let n=$(e).querySelectorAll(".sprite");for(let e=0;e<n.length;e++)n[e].classList.add("unfound"),n[e].onclick=""}function P(){this.parentNode.parentNode.querySelector("h2 span")?this.parentNode.parentNode.querySelector("h2 span").innerText=this.getAttribute("pokemon"):(V=this.getAttribute("pokemon"),H.call(this))}function S(){getRequest(Q+"pokedex.php","?pokedex=all",N)}function q(e){let n=JSON.parse(e);if(n.offered_by_me||n.offered_to_me||n.in_progress){let e="<tr><th>Other Player</th></tr>";$("games-table").innerHTML=e,n.offered_by_me&&M("Pending","cancel",n.offered_by_me),n.offered_to_me&&M("Pending","accept",n.offered_to_me),n.in_progress&&M("current","join",n.in_progress)}else $$("#invite-results h3").innerHTML="You currently have no games in progress or pending.";W("invite-btn","invite-view")}function N(e){let n=e.split("\n");for(let e=0;e<n.length;e++){let t=n[e].split(":"),o=t[0],i=t[1],s=gen("img",["sprite","unfound"]);s.src=Z+"sprites/"+i,s.setAttribute("pokemon",o),$("my-pokemon").appendChild(s),$("their-pokemon").appendChild(s.cloneNode()),$("pokedex-view").appendChild(s.cloneNode()),$("my-dex-view").appendChild(s.cloneNode())}}function M(e,n,t){for(let e=0;e<t.length;e++){let o=t[e][0],s=t[e][1];s==pid&&(s=t[e][2]),s||(s="-bot-");let r=genText("td",s),a=gen("td"),d=gen("button",["small-btn"]);if("accept"==n)d.innerText="Accept Invite",d.onclick=function(){X=this.parentNode.parentNode.querySelector("td").innerText,hide($("opponent-btns")),hide($("choose-student")),hide($$("#new-game-view .part-ii")),i()},a.appendChild(d);else if("join"==n)d.innerText="Continue Game",a.appendChild(d),d.onclick=function(){A(this.parentNode.parentNode.id)};else if("cancel"==n){let e=genText("span","Invite Pending");a.appendChild(e)}let p=gen("tr");p.id=o,appendChildren(p,[r,a]),$("games-table").appendChild(p)}show($("games-table"))}function R(e){let n=e;console.log(n),n.warning?console.log(n.warning):(O(n),K=n.guid,$("title").innerText="Pokemon Battle Mode!",j(),G(),hide([$("menu-view")]),show([$("game-view"),$("main-menu-btn"),$("results-container")]))}function _(e){if(""==V)alert("Please select a Pokemon to start a game with.");else{let n=new FormData;n.append("opponent",e),n.append("mypokemon",V),n.append("pid",pid),n.append("token",token),postRequest(Q+"create-game.php",n,function(n){"-bot-"==e||"invite-view"==z().id?R(JSON.parse(n)):(alert("Game invite sent successfully!"),c())})}}function A(e){K=e,getRequest(Q+"game-info.php",creds()+"&guid="+e,function(e){R(JSON.parse(e))})}function D(e,n){e="#"+e,$$(e+" .name").innerHTML=n.name,$$(e+" .pokepic").src=Z+n.images.photo,$$(e+" .weakness").src=Z+n.images.weaknessIcon,$$(e+" .type").src=Z+n.images.typeIcon,$$(e+" .info").innerHTML=n.info.description,$$(e+" .hp").innerHTML=n.hp+"HP";let t=n.moves,o=$$(e+" .moves button"),i=0;for(;i<t.length;i++){let n=(t[i].name,o[i]);n.classList.contains("hidden")&&n.classList.remove("hidden");let s=n.children[0];s.innerText=t[i].name;let r=n.children[2];r.src=Z+"icons/"+t[i].type+".jpg";let a=n.children[1];t[i].dp?a.innerText=t[i].dp+" DP":a.innerText="","#my-card"===e&&(n.disabled=!1,n.onclick=function(){B(this.children[0].innerText)})}if("#chosen-card"===e||"#my-card"===e||"#your-pokedex-view-card"===e){let t=n.name?U(n.name):"";t&&($$(e+" h2.name").innerText=n.name+" ("+t+")")}for(;i<4;)o[i].classList.add("hidden"),i++}function B(e){$("p1-turn-results").innerHTML="",$("p2-turn-results").innerHTML="",show($("loading")),e=e.toLowerCase();let n=new FormData;n.append("move",e),n.append("guid",K),n.append("pid",pid),n.append("token",token);let t=new XMLHttpRequest;t.onreadystatechange=function(e){if(4===t.readyState)if(200===t.status)E(JSON.parse(this.responseText));else if(201===t.status){let e=JSON.parse(t.statusText).warning;console.log(e),$("turn-status").innerText="It's not your turn!",show($("turn-status-p")),hide($("loading"))}},t.open("POST",Q+"move.php"),t.send(n)}function H(){$("start-game").classList.contains("hidden")&&$("start-game").classList.remove("hidden");let e=this.getAttribute("pokemon");""!=e&&(V=e,getRequest(Q+"pokedex.php","?pokemon="+e,function(e){let n=JSON.parse(e);D("chosen-card",n),D("my-card",n),D("your-pokedex-view-card",n)}))}function O(e){let n=e.pid1,t=e.pid2,o=n==pid?t:n,i=e.players[pid],s=e.players[o],r=e[i],a=e[s];"-bot-"!=o&&(i==e.turn?$("turn-status").innerText="It's your turn!":$("turn-status").innerText="Waiting for "+o+" to make a move...",show($("turn-status-p"))),D("my-card",r),D("their-card",a),F("my-card",r),F("their-card",a)}function E(e){let n=e.pid1,t=e.pid2,o=n==pid?t:n,i=e.players[pid],s=e.players[o],r=e[i],a=e[s];"-bot-"!=o?(i==e.turn?$("turn-status").innerText="It's your turn!":$("turn-status").innerText="Waiting for "+o+" to make a move...",show($("turn-status-p"))):o=a.name,F("my-card",r),F("their-card",a);let d=e.results,p=d["p1-result"],c=d["p2-result"],l="p1"==i;if(""!=e.turn){if(c){let n=l?o:"You";"p2"==e.turn?$("p1-turn-results").innerHTML=n+" played "+d["p2-move"]+" and "+c+"!":$("p2-turn-results").innerHTML=n+" played "+d["p2-move"]+" and "+c+"!"}if(p){let n=l?"You":o;"p2"==e.turn?$("p2-turn-results").innerHTML=n+" played "+d["p1-move"]+" and "+p+"!":$("p1-turn-results").innerHTML=n+" played "+d["p1-move"]+" and "+p+"!"}}else{let e=0==a["current-hp"];if(e){let e=l?d["p1-move"]:d["p2-move"],n=l?p:c;$("p1-turn-results").innerHTML="You played "+e+" and "+n+"!"}else{let e=l?d["p2-move"]:d["p1-move"],n=l?c:p;$("p1-turn-results").innerHTML=o+" played "+e+" and "+n+"!"}}hide($("loading")),show([$("p1-turn-results"),$("p2-turn-results")])}function F(e,n){if(!n.error){let t=$(e);t.querySelector(".hp").innerText=n["current-hp"]+"HP",t.querySelector(".buffs").innerHTML="",I($$("#"+e+" .buffs"),n.buffs,n.debuffs);let o=1*n["current-hp"]/n.hp;if(t.querySelector(".health-bar").style.width=100*o+"%","my-card"==e)0==o?J(!1):o<=.2&&t.querySelector(".health-bar").classList.add("low-health");else if("their-card"==e)if(0==o){J(!0);let e=(n.images.photo,n.name),t=$("my-pokemon").querySelector(".sprite[pokemon="+escSpChar(e)+"]");t&&t.classList.contains("unfound")&&Y(e)}else o<=.2&&t.querySelector(".health-bar").classList.add("low-health")}hide($("loading"))}function I(e,n,t){for(let o=0;o<n.length+t.length;o++){let i=o<n.length?n[o]:t[o],s=document.createElement("div");s.className=o<n.length?"buff":"debuff",s.classList.add(i),e.appendChild(s)}return e}function J(e){let n=$("my-card").querySelectorAll(".moves button");hide($("turn-status-p"));for(let e=0;e<n.length;e++)n[e].disabled=!0;$("title").innerHTML="You "+(e?"won!":"lost!"),show([$("results-container"),$("endgame")])}function Y(e){let n="";confirm("You've collected "+e+"! Give it a nickname?")&&(n=prompt("Nickname to give your "+e+":"));let t="Calling insert.php with name="+e,o=new FormData;o.append("name",e),""!=n?(o.append("nickname",n),t+=" and nickname="+n):t+=" and no nickname",console.log(t),postRequest("insert.php",o,function(){let t=""!=n?n:e;alert("Success! You have added "+t+" to your Pokedex!"),l("pokedex-view",pid),l("my-pokemon",pid),l("my-dex-view",pid)})}function j(){let e=$$(".opponent-btn");for(let n=0;n<e.length;n++)e[n].classList.remove("chosen-btn"),e[n].classList.remove("hidden");e=$$(".menu-btn");for(let n=0;n<e.length;n++)e[n].classList.remove("chosen-btn")}function G(){let e=z();e&&e.classList.remove(".current-view");let n=document.querySelectorAll(".sub-menu");for(let e=0;e<n.length;e++)hide(n[e])}function W(e,n){if(hide($$("#new-game-view .part-iii")),$(e).classList.contains("chosen-btn"))$(e).classList.remove("chosen-btn"),G();else{let t=document.querySelectorAll(".sub-menu"),o=document.querySelectorAll(".chosen-btn");for(let n=0;n<o.length;n++)o[n]!=e&&o[n].classList.remove("chosen-btn");if($(e).classList.add("chosen-btn"),$(n).classList.contains("hidden"))for(let e=0;e<t.length;e++)t[e]!=$(n)?(hide(t[e]),t[e].classList.remove("current-view")):(show(t[e]),t[e].classList.add("current-view"),"trade-view"===n&&(hide($("new-proposal-view")),hide($("current-proposals-view"))))}}function U(e){e=e.toLowerCase();let n=myPokemon.pokemon;for(let t=0;t<n.length;t++){let o=n[t].name.toLowerCase();if(o==e&&o.toUpperCase()!=n[t].nickname)return n[t].nickname}return null}function z(){return document.querySelector(".current-view")}let V="",X="",K="",Q="https://webster.cs.washington.edu/pokedex-2/18sp/",Z="https://webster.cs.washington.edu/pokedex/";window.onload=function(){fetchPid(),S(),m(),fetchMyPokemon(),n(),o(),a(),r(),d(),$("main-menu-btn").onclick=e,$("endgame").onclick=e,$("restart-btn").onclick=function(){confirm("Are you sure you want to remove all Pokemon from your Pokedex and start with three new random Pokemon?")&&getDex(pid,token,!0)},W("your-pokedex-btn","your-pokedex-view");let t=setInterval(function(){pid&&token&&myPokemon&&(clearInterval(t),l("my-dex-view",pid))},100)}}();